{"ast":null,"code":"var _jsxFileName = \"D:\\\\TFG\\\\PETCONNECT-FRONTEND\\\\src\\\\pages\\\\Register.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../api/axios';\nimport '../assets/css/register.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Register({\n  addToast,\n  onLogin\n}) {\n  _s();\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    password: '',\n    password_confirmation: ''\n  });\n  const navigate = useNavigate();\n  const [sending, setSending] = useState(false);\n\n  /* --------------- handlers --------------- */\n  const handleChange = e => setForm(f => ({\n    ...f,\n    [e.target.name]: e.target.value\n  }));\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    /* -------- front‑end validation -------- */\n    if (form.password.length < 8) {\n      addToast('La contraseña debe tener al menos 8 caracteres', 'error');\n      return;\n    }\n    if (form.password !== form.password_confirmation) {\n      addToast('Las contraseñas no coinciden', 'error');\n      return;\n    }\n    try {\n      setSending(true);\n      const {\n        data\n      } = await api.post('/api/register', form);\n\n      /* éxito -> guardar token y redirigir */\n      localStorage.setItem('token', data.token);\n      onLogin(data.token);\n      addToast('Registro exitoso', 'success');\n      navigate('/pets', {\n        replace: true\n      });\n    } catch (e) {\n      var _e$response;\n      /* -------- backend 422 -------- */\n      if (((_e$response = e.response) === null || _e$response === void 0 ? void 0 : _e$response.status) === 422 && e.response.data.errors) {\n        Object.values(e.response.data.errors).forEach(arr => addToast(arr[0], 'error'));\n      } else {\n        addToast('Error en el registro', 'error');\n      }\n    } finally {\n      setSending(false);\n    }\n  };\n\n  /* --------------- render --------------- */\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"card p-4 mx-auto\",\n    style: {\n      maxWidth: 400\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center mb-4\",\n      children: \"Registrarse\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"name\",\n      value: form.name,\n      onChange: handleChange,\n      className: \"form-control mb-2\",\n      placeholder: \"Nombre\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"email\",\n      type: \"email\",\n      value: form.email,\n      onChange: handleChange,\n      className: \"form-control mb-2\",\n      placeholder: \"Correo\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"password\",\n      type: \"password\",\n      value: form.password,\n      onChange: handleChange,\n      className: \"form-control mb-2\",\n      placeholder: \"Contrase\\xF1a (m\\xEDn. 8 caracteres)\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"password_confirmation\",\n      type: \"password\",\n      value: form.password_confirmation,\n      onChange: handleChange,\n      className: \"form-control mb-3\",\n      placeholder: \"Repite contrase\\xF1a\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary w-100\",\n      disabled: sending,\n      children: sending ? 'Enviando…' : 'Registrarse'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(Register, \"/USv0Y2YyCCicRE6WyFj/B9nPxo=\", false, function () {\n  return [useNavigate];\n});\n_c = Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","useNavigate","api","jsxDEV","_jsxDEV","Register","addToast","onLogin","_s","form","setForm","name","email","password","password_confirmation","navigate","sending","setSending","handleChange","e","f","target","value","handleSubmit","preventDefault","length","data","post","localStorage","setItem","token","replace","_e$response","response","status","errors","Object","values","forEach","arr","onSubmit","className","style","maxWidth","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","placeholder","required","type","disabled","_c","$RefreshReg$"],"sources":["D:/TFG/PETCONNECT-FRONTEND/src/pages/Register.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport api from '../api/axios';\r\nimport '../assets/css/register.css';\r\n\r\nexport default function Register({ addToast, onLogin }) {\r\n  const [form, setForm] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    password_confirmation: '',\r\n  });\r\n  const navigate = useNavigate();\r\n  const [sending, setSending] = useState(false);\r\n\r\n  /* --------------- handlers --------------- */\r\n  const handleChange = (e) =>\r\n    setForm((f) => ({ ...f, [e.target.name]: e.target.value }));\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    /* -------- front‑end validation -------- */\r\n    if (form.password.length < 8) {\r\n      addToast('La contraseña debe tener al menos 8 caracteres', 'error');\r\n      return;\r\n    }\r\n    if (form.password !== form.password_confirmation) {\r\n      addToast('Las contraseñas no coinciden', 'error');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSending(true);\r\n      const { data } = await api.post('/api/register', form);\r\n\r\n      /* éxito -> guardar token y redirigir */\r\n      localStorage.setItem('token', data.token);\r\n      onLogin(data.token);\r\n      addToast('Registro exitoso', 'success');\r\n      navigate('/pets', { replace: true });\r\n    } catch (e) {\r\n      /* -------- backend 422 -------- */\r\n      if (e.response?.status === 422 && e.response.data.errors) {\r\n        Object.values(e.response.data.errors).forEach((arr) =>\r\n          addToast(arr[0], 'error')\r\n        );\r\n      } else {\r\n        addToast('Error en el registro', 'error');\r\n      }\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  /* --------------- render --------------- */\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"card p-4 mx-auto\" style={{ maxWidth: 400 }}>\r\n      <h2 className=\"text-center mb-4\">Registrarse</h2>\r\n\r\n      <input\r\n        name=\"name\"\r\n        value={form.name}\r\n        onChange={handleChange}\r\n        className=\"form-control mb-2\"\r\n        placeholder=\"Nombre\"\r\n        required\r\n      />\r\n\r\n      <input\r\n        name=\"email\"\r\n        type=\"email\"\r\n        value={form.email}\r\n        onChange={handleChange}\r\n        className=\"form-control mb-2\"\r\n        placeholder=\"Correo\"\r\n        required\r\n      />\r\n\r\n      <input\r\n        name=\"password\"\r\n        type=\"password\"\r\n        value={form.password}\r\n        onChange={handleChange}\r\n        className=\"form-control mb-2\"\r\n        placeholder=\"Contraseña (mín. 8 caracteres)\"\r\n        required\r\n      />\r\n\r\n      <input\r\n        name=\"password_confirmation\"\r\n        type=\"password\"\r\n        value={form.password_confirmation}\r\n        onChange={handleChange}\r\n        className=\"form-control mb-3\"\r\n        placeholder=\"Repite contraseña\"\r\n        required\r\n      />\r\n\r\n      <button\r\n        className=\"btn btn-primary w-100\"\r\n        disabled={sending}\r\n      >\r\n        {sending ? 'Enviando…' : 'Registrarse'}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}