{"ast":null,"code":"var _jsxFileName = \"D:\\\\TFG\\\\PETCONNECT-FRONTEND\\\\src\\\\pages\\\\Profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport api from '../api/axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile({\n  addToast\n}) {\n  _s();\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    avatar: null\n  });\n  const [avatarPreview, setAvatarPreview] = useState(null);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    (async () => {\n      try {\n        const {\n          data\n        } = await api.get('/api/profile');\n        setForm({\n          name: data.name,\n          email: data.email,\n          avatar: null\n        });\n        setAvatarPreview(data.avatar_url);\n      } catch (err) {\n        console.error(err);\n        addToast('Error al cargar perfil', 'error');\n      }\n    })();\n  }, [addToast]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    if (name === 'avatar') {\n      const file = files[0];\n      setForm(f => ({\n        ...f,\n        avatar: file\n      }));\n      setAvatarPreview(URL.createObjectURL(file));\n    } else {\n      setForm(f => ({\n        ...f,\n        [name]: value\n      }));\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const fd = new FormData();\n      fd.append('name', form.name);\n      fd.append('email', form.email);\n      if (form.avatar) fd.append('avatar', form.avatar);\n      const {\n        data\n      } = await api.post('/api/profile', fd, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setForm(f => ({\n        ...f,\n        avatar: null\n      }));\n      setAvatarPreview(data.avatar_url);\n      addToast('Perfil actualizado', 'success');\n    } catch (err) {\n      console.error(err);\n      addToast('Error al actualizar perfil', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-auth\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Mi Perfil\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [avatarPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3 text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: avatarPreview,\n          alt: \"Avatar\",\n          className: \"rounded-circle mb-2\",\n          style: {\n            width: '120px',\n            height: '120px',\n            objectFit: 'cover'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Foto de perfil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"avatar\",\n          type: \"file\",\n          accept: \"image/*\",\n          className: \"form-control\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"name\",\n        className: \"form-control mb-2\",\n        placeholder: \"Nombre\",\n        value: form.name,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"email\",\n        type: \"email\",\n        className: \"form-control mb-3\",\n        placeholder: \"Email\",\n        value: form.email,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary w-100\",\n        disabled: loading,\n        children: loading ? 'Guardando...' : 'Guardar Cambios'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"snjlL7aEdJNuHTgMif8IdNjro1k=\");\n_c = Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","api","jsxDEV","_jsxDEV","Profile","addToast","_s","form","setForm","name","email","avatar","avatarPreview","setAvatarPreview","loading","setLoading","data","get","avatar_url","err","console","error","handleChange","e","value","files","target","file","f","URL","createObjectURL","handleSubmit","preventDefault","fd","FormData","append","post","headers","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","src","alt","style","width","height","objectFit","type","accept","onChange","placeholder","required","disabled","_c","$RefreshReg$"],"sources":["D:/TFG/PETCONNECT-FRONTEND/src/pages/Profile.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../api/axios';\r\n\r\nexport default function Profile({ addToast }) {\r\n  const [form, setForm] = useState({\r\n    name: '',\r\n    email: '',\r\n    avatar: null,\r\n  });\r\n  const [avatarPreview, setAvatarPreview] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get('/api/profile');\r\n        setForm({ name: data.name, email: data.email, avatar: null });\r\n        setAvatarPreview(data.avatar_url);\r\n      } catch (err) {\r\n        console.error(err);\r\n        addToast('Error al cargar perfil', 'error');\r\n      }\r\n    })();\r\n  }, [addToast]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    if (name === 'avatar') {\r\n      const file = files[0];\r\n      setForm((f) => ({ ...f, avatar: file }));\r\n      setAvatarPreview(URL.createObjectURL(file));\r\n    } else {\r\n      setForm((f) => ({ ...f, [name]: value }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append('name', form.name);\r\n      fd.append('email', form.email);\r\n      if (form.avatar) fd.append('avatar', form.avatar);\r\n\r\n      const { data } = await api.post('/api/profile', fd, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      });\r\n\r\n      setForm((f) => ({ ...f, avatar: null }));\r\n      setAvatarPreview(data.avatar_url);\r\n      addToast('Perfil actualizado', 'success');\r\n    } catch (err) {\r\n      console.error(err);\r\n      addToast('Error al actualizar perfil', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page-auth\">\r\n      <h2>Mi Perfil</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        {avatarPreview && (\r\n          <div className=\"mb-3 text-center\">\r\n            <img\r\n              src={avatarPreview}\r\n              alt=\"Avatar\"\r\n              className=\"rounded-circle mb-2\"\r\n              style={{\r\n                width: '120px',\r\n                height: '120px',\r\n                objectFit: 'cover',\r\n              }}\r\n            />\r\n          </div>\r\n        )}\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Foto de perfil</label>\r\n          <input\r\n            name=\"avatar\"\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            className=\"form-control\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <input\r\n          name=\"name\"\r\n          className=\"form-control mb-2\"\r\n          placeholder=\"Nombre\"\r\n          value={form.name}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          name=\"email\"\r\n          type=\"email\"\r\n          className=\"form-control mb-3\"\r\n          placeholder=\"Email\"\r\n          value={form.email}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <button className=\"btn btn-primary w-100\" disabled={loading}>\r\n          {loading ? 'Guardando...' : 'Guardar Cambios'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}