{"ast":null,"code":"var _jsxFileName = \"D:\\\\TFG\\\\PETCONNECT-FRONTEND\\\\src\\\\pages\\\\Profile.jsx\",\n  _s = $RefreshSig$();\n// PETCONNECT-FRONTEND/src/pages/Profile.jsx\nimport React, { useState, useEffect } from 'react';\nimport api from '../api/axios';\nimport MapPicker from '../components/MapPicker';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile({\n  addToast\n}) {\n  _s();\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    avatar: null,\n    latitude: null,\n    longitude: null\n  });\n  const [avatarPreview, setAvatarPreview] = useState(null);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    (async () => {\n      try {\n        const {\n          data\n        } = await api.get('/api/profile');\n        setForm({\n          name: data.name,\n          email: data.email,\n          avatar: null,\n          latitude: data.latitude,\n          longitude: data.longitude\n        });\n        setAvatarPreview(data.avatar_url);\n      } catch {\n        addToast('Error al cargar perfil', 'error');\n      }\n    })();\n  }, [addToast]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    if (name === 'avatar') {\n      const file = files[0];\n      setForm(f => ({\n        ...f,\n        avatar: file\n      }));\n      setAvatarPreview(URL.createObjectURL(file));\n    } else {\n      setForm(f => ({\n        ...f,\n        [name]: value\n      }));\n    }\n  };\n  const handleMapChange = (lat, lng) => {\n    setForm(f => ({\n      ...f,\n      latitude: lat,\n      longitude: lng\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const fd = new FormData();\n      fd.append('name', form.name);\n      fd.append('email', form.email);\n      if (form.avatar) fd.append('avatar', form.avatar);\n      if (form.latitude != null) fd.append('latitude', form.latitude);\n      if (form.longitude != null) fd.append('longitude', form.longitude);\n      const {\n        data\n      } = await api.post('/api/profile', fd, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setAvatarPreview(data.avatar_url);\n      addToast('Perfil actualizado', 'success');\n    } catch {\n      addToast('Error al actualizar perfil', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-auth\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Mi Perfil\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [avatarPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3 text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: avatarPreview,\n          alt: \"Avatar\",\n          className: \"rounded-circle mb-2\",\n          style: {\n            width: '120px',\n            height: '120px',\n            objectFit: 'cover'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Foto de perfil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"avatar\",\n          type: \"file\",\n          accept: \"image/*\",\n          className: \"form-control\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"name\",\n        className: \"form-control mb-2\",\n        placeholder: \"Nombre\",\n        value: form.name,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"email\",\n        type: \"email\",\n        className: \"form-control mb-3\",\n        placeholder: \"Email\",\n        value: form.email,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label mt-3\",\n        children: \"Selecciona tu ubicaci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MapPicker, {\n        latitude: form.latitude,\n        longitude: form.longitude,\n        onChange: handleMapChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary w-100 mt-3\",\n        disabled: loading,\n        children: loading ? 'Guardando...' : 'Guardar Cambios'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"jy0ybCvZMd9BkxptWEDN0vlBTdA=\");\n_c = Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","api","MapPicker","jsxDEV","_jsxDEV","Profile","addToast","_s","form","setForm","name","email","avatar","latitude","longitude","avatarPreview","setAvatarPreview","loading","setLoading","data","get","avatar_url","handleChange","e","value","files","target","file","f","URL","createObjectURL","handleMapChange","lat","lng","handleSubmit","preventDefault","fd","FormData","append","post","headers","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","src","alt","style","width","height","objectFit","type","accept","onChange","placeholder","required","disabled","_c","$RefreshReg$"],"sources":["D:/TFG/PETCONNECT-FRONTEND/src/pages/Profile.jsx"],"sourcesContent":["// PETCONNECT-FRONTEND/src/pages/Profile.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport api from '../api/axios';\r\nimport MapPicker from '../components/MapPicker';\r\n\r\nexport default function Profile({ addToast }) {\r\n  const [form, setForm] = useState({\r\n    name: '',\r\n    email: '',\r\n    avatar: null,\r\n    latitude: null,\r\n    longitude: null,\r\n  });\r\n  const [avatarPreview, setAvatarPreview] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get('/api/profile');\r\n        setForm({\r\n          name: data.name,\r\n          email: data.email,\r\n          avatar: null,\r\n          latitude: data.latitude,\r\n          longitude: data.longitude,\r\n        });\r\n        setAvatarPreview(data.avatar_url);\r\n      } catch {\r\n        addToast('Error al cargar perfil', 'error');\r\n      }\r\n    })();\r\n  }, [addToast]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    if (name === 'avatar') {\r\n      const file = files[0];\r\n      setForm((f) => ({ ...f, avatar: file }));\r\n      setAvatarPreview(URL.createObjectURL(file));\r\n    } else {\r\n      setForm((f) => ({ ...f, [name]: value }));\r\n    }\r\n  };\r\n\r\n  const handleMapChange = (lat, lng) => {\r\n    setForm((f) => ({ ...f, latitude: lat, longitude: lng }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append('name', form.name);\r\n      fd.append('email', form.email);\r\n      if (form.avatar) fd.append('avatar', form.avatar);\r\n      if (form.latitude != null) fd.append('latitude', form.latitude);\r\n      if (form.longitude != null) fd.append('longitude', form.longitude);\r\n\r\n      const { data } = await api.post('/api/profile', fd, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      });\r\n\r\n      setAvatarPreview(data.avatar_url);\r\n      addToast('Perfil actualizado', 'success');\r\n    } catch {\r\n      addToast('Error al actualizar perfil', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page-auth\">\r\n      <h2>Mi Perfil</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        {avatarPreview && (\r\n          <div className=\"mb-3 text-center\">\r\n            <img\r\n              src={avatarPreview}\r\n              alt=\"Avatar\"\r\n              className=\"rounded-circle mb-2\"\r\n              style={{\r\n                width: '120px',\r\n                height: '120px',\r\n                objectFit: 'cover',\r\n              }}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Foto de perfil</label>\r\n          <input\r\n            name=\"avatar\"\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            className=\"form-control\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n\r\n        <input\r\n          name=\"name\"\r\n          className=\"form-control mb-2\"\r\n          placeholder=\"Nombre\"\r\n          value={form.name}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          name=\"email\"\r\n          type=\"email\"\r\n          className=\"form-control mb-3\"\r\n          placeholder=\"Email\"\r\n          value={form.email}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n\r\n        <label className=\"form-label mt-3\">Selecciona tu ubicación</label>\r\n        <MapPicker\r\n          latitude={form.latitude}\r\n          longitude={form.longitude}\r\n          onChange={handleMapChange}\r\n        />\r\n\r\n        <button className=\"btn btn-primary w-100 mt-3\" disabled={loading}>\r\n          {loading ? 'Guardando...' : 'Guardar Cambios'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}